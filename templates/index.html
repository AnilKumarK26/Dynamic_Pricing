<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Airline Revenue Management RL Dashboard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <h1>‚úàÔ∏è Airline Revenue Management Dashboard</h1>
            <p class="subtitle">Reinforcement Learning Powered Dynamic Pricing</p>
        </header>

        <!-- Main Grid -->
        <div class="dashboard-grid">
            
            <!-- Left Panel - Controls -->
            <div class="panel controls-panel">
                <h2>üéÆ Control Center</h2>
                
                <!-- Pricing Actions -->
                <div class="section">
                    <h3>Pricing Actions</h3>
                    <div class="button-group">
                        <button class="action-btn decrease-btn" onclick="takeAction('decrease_20')">
                            üìâ -20%
                        </button>
                        <button class="action-btn decrease-btn" onclick="takeAction('decrease_10')">
                            üìâ -10%
                        </button>
                        <button class="action-btn hold-btn" onclick="takeAction('hold')">
                            ‚è∏Ô∏è Hold
                        </button>
                        <button class="action-btn increase-btn" onclick="takeAction('increase_10')">
                            üìà +10%
                        </button>
                        <button class="action-btn increase-btn" onclick="takeAction('increase_20')">
                            üìà +20%
                        </button>
                    </div>
                </div>

                <!-- AI Recommendation -->
                <div class="section ai-recommendation">
                    <h3>ü§ñ AI Recommendation</h3>
                    <div id="ai-rec-content">
                        <p class="loading">Getting recommendation...</p>
                    </div>
                    <button class="btn-primary" onclick="getAIRecommendation()">
                        üîÑ Refresh
                    </button>
                    <button class="btn-success" onclick="followAI()">
                        ‚úÖ Follow AI
                    </button>
                </div>

                <!-- Disruptions -->
                <div class="section">
                    <h3>‚ö†Ô∏è Trigger Disruption</h3>
                    <div class="button-group">
                        <button class="disruption-btn" onclick="triggerDisruption('weather')">
                            ‚õàÔ∏è Weather
                        </button>
                        <button class="disruption-btn" onclick="triggerDisruption('pilot_strike')">
                            ‚úä Strike
                        </button>
                        <button class="disruption-btn" onclick="triggerDisruption('competitor_cancel')">
                            ‚úàÔ∏è Comp Cancel
                        </button>
                        <button class="disruption-btn" onclick="triggerDisruption('none')">
                            ‚úÖ Clear
                        </button>
                    </div>
                </div>

                <!-- System Controls -->
                <div class="section">
                    <button class="btn-secondary full-width" onclick="autoRun()">
                        ü§ñ Auto Run (AI Mode)
                    </button>
                    <button class="btn-warning full-width" onclick="resetSimulation()">
                        üîÑ Reset Simulation
                    </button>
                </div>
            </div>

            <!-- Center Panel - Main Metrics -->
            <div class="panel metrics-panel">
                <h2>üìä Live Metrics</h2>
                
                <!-- Key Metrics Cards -->
                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-label">Current Price</div>
                        <div class="metric-value" id="current-price">‚Çπ6,000</div>
                        <div class="metric-change" id="price-change">‚Äî</div>
                    </div>
                    
                    <div class="metric-card">
                        <div class="metric-label">Seats Sold</div>
                        <div class="metric-value" id="seats-sold">0 / 180</div>
                        <div class="metric-change" id="seats-change">‚Äî</div>
                    </div>
                    
                    <div class="metric-card">
                        <div class="metric-label">Load Factor</div>
                        <div class="metric-value" id="load-factor">0.0%</div>
                        <div class="metric-progress">
                            <div class="progress-bar" id="load-progress"></div>
                        </div>
                    </div>
                    
                    <div class="metric-card">
                        <div class="metric-label">Total Revenue</div>
                        <div class="metric-value" id="total-revenue">‚Çπ0</div>
                        <div class="metric-change positive" id="revenue-change">‚Äî</div>
                    </div>
                    
                    <div class="metric-card">
                        <div class="metric-label">Days to Departure</div>
                        <div class="metric-value" id="days-departure">90</div>
                    </div>
                    
                    <div class="metric-card">
                        <div class="metric-label">Disruption Status</div>
                        <div class="metric-value" id="disruption-status">None</div>
                    </div>
                </div>

                <!-- Competitor Prices -->
                <div class="section competitor-section">
                    <h3>üè¢ Competitor Prices</h3>
                    <div id="competitor-prices" class="competitor-grid">
                        <!-- Will be populated dynamically -->
                    </div>
                </div>

                <!-- Charts -->
                <div class="charts-container">
                    <div class="chart-box">
                        <h3>Price & Bookings History</h3>
                        <canvas id="priceChart"></canvas>
                    </div>
                    <div class="chart-box">
                        <h3>Revenue Trend</h3>
                        <canvas id="revenueChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Right Panel - Activity Log & Analytics -->
            <div class="panel log-panel">
                <h2>üìù Activity Log</h2>
                <div id="activity-log" class="activity-log">
                    <div class="log-entry">
                        <span class="log-time">00:00:00</span>
                        <span class="log-message">System initialized</span>
                    </div>
                </div>

                <h2>üìà Analytics</h2>
                <div id="analytics-panel" class="analytics-panel">
                    <!-- Analytics will be populated -->
                </div>
            </div>
        </div>
    </div>

    <!-- Notification Toast -->
    <div id="toast" class="toast"></div>

    <script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
</body>
</html>